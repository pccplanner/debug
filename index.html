<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Script Manager Tool</title>
<style>
  body { font-family:-apple-system, BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif; margin:0; padding:0; background:#0d1117; color:#c9d1d9; display:flex; height:100vh; flex-direction:column; overflow:hidden; }
  h1 { font-size:20px; text-align:center; margin:10px; }
  .container { display:flex; flex-direction:column; flex:1; padding:10px; gap:10px; overflow:hidden; }
  .header-section { position:fixed; top:0; left:0; right:0; background:#0d1117; z-index:10; }
  #menu-btn { position:absolute; top:12px; right:12px; background:transparent; border:none; font-size:20px; color:inherit; cursor:pointer; }
  .toolbar { display:none; gap:5px; padding:5px; background:#161b22; border-bottom:1px solid #30363d; overflow-x:auto; white-space:nowrap; }
  .toolbar input[type="file"] { display:none; }
  .toolbar label, .toolbar button { padding:5px 10px; background:#238636; color:#fff; border:none; border-radius:4px; font-size:12px; cursor:pointer; }
  .toolbar label:hover, .toolbar button:hover { background:#2ea44f; }
  .search-bar { padding:5px; background:#161b22; border:1px solid #30363d; border-radius:6px; margin-bottom:5px; }
  .search-bar input { width:100%; padding:5px; background:#21262d; color:#c9d1d9; border:1px solid #30363d; border-radius:4px; font-size:12px; }
  .code-container { display:flex; background:#21262d; border:1px solid #30363d; border-radius:6px; position:relative; overflow:hidden; }
  .panel-toolbar { position:absolute; top:6px; right:6px; display:flex; gap:6px; z-index:2; }
  .copy-btn, .paste-btn { background:transparent; border:none; font-size:16px; cursor:pointer; color:#8b949e; }
  .copy-btn:hover, .paste-btn:hover { color:#c9d1d9; }
  .line-numbers { width:24px; padding-right:6px; background:transparent; text-align:right; font-family:"SFMono-Regular",monospace; font-size:11px; color:#6e7681; line-height:21px; position:sticky; left:0; top:0; z-index:1; user-select:none; }
  .code-content { flex:1; margin-left:24px; }
  textarea { width:100%; height:100%; padding:10px; font-family:"SFMono-Regular",monospace; font-size:14px; line-height:21px; background:#21262d; color:#c9d1d9; border:none; resize:none; overflow-y:auto; }
  .splitter { height:5px; background:#30363d; cursor:ns-resize; display:flex; justify-content:center; align-items:center; }
  .splitter-handle { width:40px; height:5px; background:#8b949e; border-radius:3px; }
  .splitter:hover .splitter-handle { background:#c9d1d9; }
</style>
</head>
<body>
<div class="container">
  <div class="header-section">
    <h1>Script Manager Tool</h1>
    <div class="search-bar">
      <input type="text" id="search" placeholder="Search (supports regex)" oninput="searchInScript()">
    </div>
    <button id="menu-btn">â‹®</button>
    <div class="toolbar">
      <label for="file-input-original">Load Original</label>
      <input type="file" id="file-input-original" accept=".txt" onchange="loadFileContent('original')">
      <label for="file-input-patch">Load Patch</label>
      <input type="file" id="file-input-patch" accept=".txt" onchange="loadFileContent('patch')">
      <button onclick="compareScripts()">Compare</button>
      <button onclick="applyPatch()">Apply Patch</button>
      <button onclick="mergeScripts()">Merge</button>
      <button onclick="clearContent()">Clear</button>
      <button onclick="saveProject()">Save</button>
      <button onclick="undo()">Undo</button>
    </div>
  </div>

  <div class="editor-wrapper" style="margin-top:120px; flex:1; display:flex; flex-direction:column; overflow:hidden;">
    <div class="code-container" id="original-container">
      <div class="panel-toolbar">
        <button class="copy-btn" onclick="copyPanel(this)">ðŸ“‹</button>
        <button class="paste-btn" onclick="pastePanel(this)">ðŸ“¥</button>
      </div>
      <div class="line-numbers" id="original-lines"></div>
      <div class="code-content"><textarea id="original" placeholder="Original script..." oninput="updateLineNumbers('original')"></textarea></div>
    </div>
    <div class="splitter"><div class="splitter-handle"></div></div>
    <div class="code-container" id="patch-container">
      <div class="panel-toolbar">
        <button class="copy-btn" onclick="copyPanel(this)">ðŸ“‹</button>
        <button class="paste-btn" onclick="pastePanel(this)">ðŸ“¥</button>
      </div>
      <div class="line-numbers" id="patch-lines"></div>
      <div class="code-content"><textarea id="patch" placeholder="Patch script..." oninput="updateLineNumbers('patch')"></textarea></div>
    </div>
  </div>
</div>

<script>
document.getElementById('menu-btn').onclick = () => {
  const tb = document.querySelector('.toolbar');
  tb.style.display = tb.style.display === 'flex' ? 'none' : 'flex';
};
function copyPanel(btn) {
  navigator.clipboard.writeText(btn.closest('.code-container').querySelector('textarea').value);
}
function pastePanel(btn) {
  navigator.clipboard.readText().then(text => {
    const ta = btn.closest('.code-container').querySelector('textarea');
    ta.value = text;
    updateLineNumbers(ta.id);
  });
}

/* ==== All remaining JS unchanged from CodeMixer V4.0 ==== */
let lineHeight = 21, history = [], isResizing = false, startY, startHeightTop, startHeightBottom, splitter=null;
function loadFileContent(panel){/*â€¦*/} function updateLineNumbers(id){/*â€¦*/} function saveToHistory(){/*â€¦*/} function undo(){/*â€¦*/} function searchInScript(){/*â€¦*/} function compareScripts(){/*â€¦*/} function navigateToChanges(){/*â€¦*/} function applyPatch(){/*â€¦*/} function mergeScripts(){/*â€¦*/} function clearContent(){/*â€¦*/} function saveProject(){/*â€¦*/} function initSplitter(){/*â€¦*/} function startResize(e){/*â€¦*/} function resizePanels(e){/*â€¦*/} function stopResize(e){/*â€¦*/} window.onload=function(){/*â€¦*/};
</script>
</body>
</html>